<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title th:text="|${pageName}|"></title>
	<link rel="stylesheet" th:href="@{/css/scroll.css}">
	<link rel="stylesheet" th:href="@{/css/nav_보현.css}">
	<link rel="stylesheet" th:href="@{/css/login.css}">
	<!-- Bootstrap CSS CDN -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Bootstrap Icons CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
	<!-- Bootstrap Date Range Picker CSS -->
	<link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet">
</head>

<body>
<div class="header">
<!-- 네비게이션 바 -->
<nav class="navbar">
    <div class="navbar-container">
        <!-- 로고 -->
        <a class="navbar-brand" th:href="@{/security-login}"><img id="logoImage" src="/images/hotel_logo.png" width="100px"></a>
        
            <!-- 검색창 -->
            <div class="search-container">
                <form th:action="@{/security-login/hotelList}" method="get" onsubmit="return redirectToSearch()">
                    <div class="navbar-search">
                        <input id="searchInput" class="form-control me-2" type="search" name="keyword"
                            placeholder="여행지나 숙소를 검색해 보세요!" onfocus="toggleSearchForm()">
                        <input type="text" id="dateRangePicker" name="daterange" class="form-control"
                            placeholder="체크인 - 체크아웃">
                        
                        <div class="dropdown">
                            <!-- 네비게이션 바에 강아지 마리 수 표시할 요소 추가 -->
                            <button class="btn btn-outline-secondary" type="button" onclick="toggleDogDropdown()">강아지</button>

                            <div id="dogDropdown" class="dropdown-content">
                                <div class="input-group mb-3">
                                    <span class="input-group-text" id="dogWeight1Label">S</span>
                                    <button class="btn btn-outline-secondary" type="button"
                                        onclick="decrement('dogWeight1')">-</button>
                                    <input type="number" class="form-control" id="dogWeight1" value="0" min="0"
                                        aria-label="1-6kg" aria-describedby="dogWeight1Label" readonly>
                                    <button class="btn btn-outline-secondary" type="button"
                                        onclick="increment('dogWeight1')">+</button>
                                </div>

                                <div class="input-group mb-3">
                                    <span class="input-group-text" id="dogWeight2Label">M</span>
                                    <button class="btn btn-outline-secondary" type="button"
                                        onclick="decrement('dogWeight2')">-</button>
                                    <input type="number" class="form-control" id="dogWeight2" value="0" min="0"
                                        aria-label="7-12kg" aria-describedby="dogWeight2Label" readonly>
                                    <button class="btn btn-outline-secondary" type="button"
                                        onclick="increment('dogWeight2')">+</button>
                                </div>

                                <div class="input-group mb-3">
                                    <span class="input-group-text" id="dogWeight3Label">L</span>
                                    <button class="btn btn-outline-secondary" type="button"
                                        onclick="decrement('dogWeight3')">-</button>
                                    <input type="number" class="form-control" id="dogWeight3" value="0" min="0"
                                        aria-label="13-20kg" aria-describedby="dogWeight3Label" readonly>
                                    <button class="btn btn-outline-secondary" type="button"
                                        onclick="increment('dogWeight3')">+</button>
                                </div>

                                <button class="btn btn-outline-primary" type="button" onclick="applyDogSelection()">적용</button>
                                <button class="btn btn-outline-secondary" type="button" onclick="resetDogSelection()">초기화</button>
                            </div>

                            <div class="search-button">
                                <button type="submit" class="btn btn-outline-success">검색</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        
        <!-- 사용자 정보와 메뉴 -->
        <div class="navbar-menu">
            <div th:if="${uId == null}">
                <a class="btn btn-link btn-sm" th:href="@{/security-login/login}" role="button"
                    style="font-size: 0.8rem; color: black;">로그인</a>
                <a class="btn btn-link btn-sm" th:href="@{/security-login/join}" role="button"
                    style="font-size: 0.8rem; color: black;">회원가입</a>
            </div>
            <div th:unless="${uId == null}">
                <span>[[${uName}]]님 환영합니다!</span>
            </div>
        </div>

        <!-- Menu 드롭다운 버튼 -->
        <div class="button-dropdown">
            <button type="button" class="btn btn-link btn-sm" id="menuDropdown" onclick="toggleMenuDropdown()">
                <i class="bi bi-list" style="font-size: 30px;"></i>
            </button>
            <div id="menuDropdownContent" class="dropdown-content">
                <a href="#" onclick="focusSearchBar(); return false;" class="dropdown-item">Dog Hotel</a>
                <a th:href="@{/eventlist}" class="dropdown-item">Event</a>
                <a th:href="@{/security-login/info}" class="dropdown-item">My Page</a>
                <!-- 로그인 한 경우에만 로그아웃 버튼 표시 -->
                <div th:if="${uId != null}">
                    <a th:href="@{/security-login/logout}" class="dropdown-item">Logout</a>
                </div>
                <!-- 로그인 안 한 경우에 로그인 버튼 표시 -->
                <div th:unless="${uId != null}">
                    <a th:href="@{/security-login/login}" class="dropdown-item">Login</a>
                </div>
            </div>
        </div>
	</div>
</nav>
<!-- 네비게이션 바의 높이만큼 여백을 주어 콘텐츠가 네비게이션 바 아래에 위치하도록 함 -->
	<div style="height: 60px;"></div> 
</div>

<!-- body -->
<div class="login-container">
		<div class="loginform">
			<div class="login-box">
				<h2>로그인</h2>
				<form th:method="post" th:action="|/${loginType}/loginProc|" th:object="${loginRequest}">
					<div class="form-floating mb-3">
						<label for="uId">아이디</label>
						<input type="text" class="form-control" id="uId" th:field="*{uId}" placeholder="Id">
					</div>
					<div class="form-floating">
						<label for="uPw">비밀번호</label>
						<input type="password" class="form-control" id="uPw" th:field="*{uPw}" placeholder="Password">
					</div>

					<br />

					<div th:if="${#fields.hasGlobalErrors()}">
						<br />
						<div class="error-class" th:each="error : ${#fields.globalErrors()}" th:text="${error}"></div>
					</div>

					<br />
				<!--	<div th:if="${loginError != null}">
					    <p class="error-message" th:text="${loginError}"></p>
					</div>-->

					<div th:if="${loginError}">
						<p th:text="${loginError}" style="color: red;"></p>
					</div>
					<button type="submit">로그인</button>
					<a th:href="@{/oauth2/authorization/google}">
						<img th:src="@{/images/google.png}" alt="구글 로그인" style="width: 310px;">
					</a>
					<a th:href="@{/oauth2/authorization/kakao}">
						<img th:src="@{/images/kakao.png}" alt="카카오 로그인" style="width: 310px;">
					</a>
					<button type="button"
						th:onclick="|location.href='@{/{loginType}/join (loginType=${loginType})}'|">회원 가입</button>
					<a th:href="@{/security-login/find-id}" class="btn btn-link btn-sm" role="button">아이디를 잊으셨습니까?</a>
					<a th:href="@{/security-login/find-password}" class="btn btn-link btn-sm" role="button">비밀번호를
						잊으셨습니까?</a>
					<br /><br />
				</form>
			</div>
		</div>
	</div>
	<div>
		<i class="bi bi-arrow-up-square-fill" id="scrollUpIcon"></i>
	</div>
	<div th:replace="~{footer :: footer}"></div>
	<!-- jQuery (필수) -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<!-- Bootstrap JS and dependencies -->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<!-- Moment.js (필수) -->
	<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
	<!-- Bootstrap Date Range Picker JS -->
	<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<!-- 스크립트 -->
	<script th:src="@{/js/scroll.js}" type="text/javascript"></script>
	<script th:src="@{/js/nav_보현.js}" type="text/javascript"></script>
</body>

</html>