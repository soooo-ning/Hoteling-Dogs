<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title th:text="|${pageName}|"></title>
	<link rel="stylesheet" th:href="@{/css/scroll.css}">
	<link rel="stylesheet" th:href="@{/css/nav_보현.css}">
	<link rel="stylesheet" th:href="@{/css/event_styles.css}">
	<!-- Bootstrap CSS CDN -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
	<!-- Bootstrap Icons CDN -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
	<!-- Bootstrap Date Range Picker CSS -->
	<link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
<div class="header">
<!-- 네비게이션 바 -->
<div th:insert="~{nav :: nav}"></div>

<!-- 네비게이션 바의 높이만큼 여백을 주어 콘텐츠가 네비게이션 바 아래에 위치하도록 함 -->
	<div style="height: 60px;"></div> 
</div>

<!-- body -->
    <div class="container-event">
	<div class="container-sub">
		<h1><a th:href="@{/eventlist}">EVENT</a></h1>
	</div>
        <div id="eventArea" class="event-list">
<!--			<button type="button" id="userBtn" class="btn btn-primary">일반 사용자</button>-->
<!--            <button type="button" id="adminBtn" class="btn btn-success">관리자</button>-->
			<input type="hidden" id="userType" name="userType" th:value="${userType}" > <!-- 1: 일반사용자 / 2는 관리자 -->
			<form id="event_move_form" action="/eventread" method="POST"> <!-- 지우지 마시오 -->
				<input type="hidden" id="event_id" name="event_id" value="" >
			</form>
            <!-- 이벤트 항목을 반복하여 출력 -->
			<th:block th:each="event : ${events}">
	            <div th:id="${event.event_id}+_divArea" class="event-item">
					<th:block th:each="file : ${eventFiles}">
						<th:block th:if="${file.event.event_id == event.event_id}">
	                		<img th:id="${event.event_id}+_event_file" class="event-image hide" th:src="'data:image/jpeg;base64,'+${file.event_file}" alt="타이틀 이미지" />
	                		<img th:id="${event.event_id}+_event_title_file" class="event-image" th:src="'data:image/jpeg;base64,'+${file.event_title_file}" alt="타이틀 이미지" />
						</th:block>
					</th:block>
	                <div class="event-details">
	                    <div th:id="${event.event_id}+_event_title" class="event-title" th:text="${event.title}"></div>
	                    <div th:id="${event.event_id}+_event_created_at" class="event-date" th:text="${event.created_at}"></div>
	                </div>
	            </div>
			</th:block>
        </div>
    </div>
<div class="modal fade" id="eventModalCenter" tabindex="-1" role="dialog" aria-labelledby="eventModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="eventModalCenterTitle">이벤트 수정</h5>
                <button type="button" id="eventModalCloseTop" class="close" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="events">
                    <!-- 리뷰 폼 내용 (별점, 내용 등) -->
                    <input type="hidden" id="event_id" name="event_id">
                    <input type="hidden" id="event_file_id" name="event_file_id">
					<div class="form-group">
		                <label for="title">제목</label>
		                <input type="text" id="title" name="title" placeholder="제목">
		            </div>
		            <div class="form-group">
		                <label for="content">내용</label>
		                <div id="content" name="content" contenteditable="true" placeholder="내용" style="border: 1px solid #ccc; padding: 10px;"></div>
		            </div>
                    <div id="event_title_file_view" style="height:100px; overflow:auto;">
                        <!-- 이미지 파일 (미리보기 등) -->
                    </div>
		            <div class="form-group">
		                <label for="title_image">타이틀 이미지</label>
		                <input type="file" id="title_image" name="title_image" accept="image/*">
		            </div>
		            <div class="form-group">
		                <label for="image">첨부파일</label>
		                <input type="file" id="image" name="image" accept="image/*">
		            </div>
                    <input type="hidden" id="imgChg" name="imgChg" value="0">
                    <input type="hidden" id="imgChgTitle" name="imgChgTitle" value="0">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" id="editButton" class="btn btn-primary">수정하기</button>
                <button type="button" id="saveButton" class="btn btn-success hide">수정완료</button>
                <button type="button" id="deleteButton" class="btn btn-danger hide">삭제</button>
                <button type="button" id="closeButton" class="btn btn-secondary">닫기</button>
            </div>
        </div>
    </div>
</div>
<!-- 스크롤 업-->
<div>
	<i class="bi bi-arrow-up-square-fill" id="scrollUpIcon"></i>
</div>
<div th:replace="~{footer :: footer}"></div>
<!-- jQuery (필수) -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<!-- Bootstrap JS and dependencies -->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<!-- Moment.js (필수) -->
	<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
	<!-- Bootstrap Date Range Picker JS -->
	<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<!-- 스크립트 -->
	<script th:src="@{/js/page_nav.js}" type="text/javascript"></script>
	<script th:src="@{/js/event_list.js}" type="text/javascript"></script>
	<script th:src="@{/js/scroll.js}" type="text/javascript"></script>
</body>

</html>