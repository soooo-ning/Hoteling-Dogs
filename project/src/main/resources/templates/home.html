<html lang="ko">
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title th:text="|${pageName}|"></title>
	<link rel="stylesheet" th:href="@{/css/scroll.css}">
	<link rel="stylesheet" th:href="@{/css/main_보현.css}">
	<!-- Bootstrap CSS CDN -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Bootstrap Icons CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
	<!-- Bootstrap Date Range Picker CSS -->
	<link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet">
</head>

<div>
	<div class="main-image" style="background-image: url('/images/dog.jpg'); ">
	<nav class="navbar">
		<div class="navbar-container">
			<!-- 로고 -->
			<a class="navbar-brand" th:href="@{/security-login}"><img id="logoImage" src="/images/logo_white.png" width="100px"></a>
		<div>

		</div>
		<div class="d-flex align-items-center ml-auto">
		<!-- 사용자 정보와 메뉴 -->
		<div class="navbar-menu">
			<div th:if="${uId == null}">
				<a class="btn btn-link btn-sm" th:href="@{/security-login/login}" role="button"
					style="font-size: 0.8rem; color: black;">로그인</a>
				<a class="btn btn-link btn-sm" th:href="@{/security-login/join}" role="button"
					style="font-size: 0.8rem; color: black;">회원가입</a>
			</div>
			<div th:unless="${uId == null}">
				<span>[[${uName}]]님 환영합니다!</span>
			</div>
		</div>

		<!-- Menu 드롭다운 버튼 -->
		<div class="button-dropdown">
			<button type="button" class="btn btn-link btn-sm" id="menuDropdown" onclick="toggleMenuDropdown()">
				<!-- 여기서 <i class="bi bi-list"></i> 대신 SVG를 사용 -->
				<i class="bi bi-list" style="font-size: 30px;"></i>

			</button>
			<div id="menuDropdownContent" class="dropdown-content">
				<a href="#" onclick="focusSearchBar(); return false;" class="dropdown-item">Dog Hotel</a>
				<a th:href="@{/eventlist}" class="dropdown-item">Event</a>
				<a th:href="@{/security-login/info}" class="dropdown-item">My Page</a>
				<!-- 로그인 한 경우에만 로그아웃 버튼 표시 -->
				<div th:if="${uId != null}">
				    <a th:href="@{/security-login/logout}" class="dropdown-item">Logout</a>
				</div>
				<!-- 로그인 안 한 경우에 로그인 버튼 표시 -->
				<div th:unless="${uId != null}">
				    <a th:href="@{/security-login/login}" class="dropdown-item">Login</a>
				</div>
			</div>
		</div>


		</div>
	</nav>
<!--Body-->
	</div>
	<div class="main-banner">
	<form th:action="@{/security-login/hotelList}" method="get" onsubmit="return redirectToSearch()">
    <div class="search-bar">
        <input id="searchInput" class="form-control me-2" type="search" name="keyword" placeholder="반려견에게 특별한 하루를 선물해요!"
            onfocus="toggleSearchForm()">
        <input type="text" id="dateRangePicker" name="daterange" class="form-control" placeholder="체크인 - 체크아웃">
        <div class="dropdown">
            <!-- 네비게이션 바에 강아지 마리 수 표시할 요소 추가 -->
            <button class="btn btn-outline-secondary" type="button" onclick="toggleDogDropdown()">강아지</button>

            <div id="dogDropdown" class="dropdown-content">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="dogWeight1Label">S</span>
                    <button class="btn btn-outline-secondary" type="button"
                        onclick="decrement('dogWeight1')">-</button>
                    <input type="number" class="form-control" id="dogWeight1" value="0" min="0" aria-label="1-6kg"
                        aria-describedby="dogWeight1Label" readonly>
                    <button class="btn btn-outline-secondary" type="button"
                        onclick="increment('dogWeight1')">+</button>
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text" id="dogWeight2Label">M</span>
                    <button class="btn btn-outline-secondary" type="button"
                        onclick="decrement('dogWeight2')">-</button>
                    <input type="number" class="form-control" id="dogWeight2" value="0" min="0" aria-label="7-12kg"
                        aria-describedby="dogWeight2Label" readonly>
                    <button class="btn btn-outline-secondary" type="button"
                        onclick="increment('dogWeight2')">+</button>
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text" id="dogWeight3Label">L</span>
                    <button class="btn btn-outline-secondary" type="button"
                        onclick="decrement('dogWeight3')">-</button>
                    <input type="number" class="form-control" id="dogWeight3" value="0" min="0" aria-label="13-20kg"
                        aria-describedby="dogWeight3Label" readonly>
                    <button class="btn btn-outline-secondary" type="button"
                        onclick="increment('dogWeight3')">+</button>
                </div>

                <button class="btn btn-outline-primary" type="button" onclick="applyDogSelection()">적용</button>
                <button class="btn btn-outline-secondary" type="button" onclick="resetDogSelection()">초기화</button>
            </div>
            <div class="search-button">
                <button type="submit" class="btn btn-outline-success">검색</button>
            </div>
        </div>
    </div>
</form>

		</div>

		<!-- 이벤트 카드 영역 -->
		<div class="container mt-5">
	    <!-- 이벤트 리스트 출력 -->
	    <form id="event_move_form" action="/eventread" method="POST"> <!-- 지우지 마시오 -->
	    <input type="hidden" id="event_id" name="event_id" value="" >
		</form>
	    <div class="event-cards">
	        <th:block th:each="event : ${events}">
	            <div th:id="${event.event_id}+_divArea" class="event-card">
	                <a class="event-link" href="#" 
	                   th:onclick="'setEventId(' + ${event.event_id} + ')'" 
	                   style="display: block; text-decoration: none;">
	                    <!-- 이벤트 타이틀 이미지 -->
	                    <th:block th:each="file : ${eventFiles}">
	                        <th:block th:if="${file.event.event_id == event.event_id}">
	                            <img th:id="${event.event_id}+_event_title_file" 
	                                 class="event-image" 
	                                 th:src="'data:image/jpeg;base64,' + ${file.event_title_file}" 
	                                 alt="이벤트 타이틀 이미지" />
	                        </th:block>
	                    </th:block>
	                </a>
	            </div>
	        </th:block>
	    </div>
		</div>

		<div class="popular-hotels">
		    <h2 class="section-title">찜 많이 하는 숙소 추천 🎈 </h2>
		    <div class="hotel-list">
		        <!-- 호텔 리스트 반복 렌더링 -->
		        <div th:each="hotel : ${mostLikedHotels}" class="hotel-card">
					<a th:href="@{/hotel/{hotelId}(hotelId=${hotel.hotelId})}">
					   <img th:src="@{/images/{imageName}(imageName=${hotel.getMainImage() != null ? hotel.getMainImage().getImageUrl() : 'default.jpg'})}" alt="Hotel Image">
				   </a>
						 <a th:href="@{/hotel/{hotelId}(hotelId=${hotel.hotelId})}">
						      <div class="hotel-name" th:text="${hotel?.hotelName}">Hotel Name</div>
					     </a>
					<!--<p th:text="${hotel.location}">Location</p>-->
					<span class="room-prices" th:text="${hotel.getRooms() != null && !hotel.getRooms().isEmpty() ? hotel.getRooms().get(0).getFormattedPrice() : 'No rooms available'}">Price</span>
		        </div>
		    </div>
		</div>

		<!-- Main Content -->
		<div class="content">
			
			<!-- Main Image -->
			<div class="main-image"></div>
			<!-- Event Preview -->
			
			
			<div class="popular-hotels">
					    <h2 class="section-title">3만원 이하! 가성비 좋은 숙소 🍀 </h2>
					    <div class="hotel-list">
					        <div th:each="hotel : ${cheapHotels}" class="hotel-card">
								<a th:href="@{/hotel/{hotelId}(hotelId=${hotel.hotelId})}">
							        <img th:src="@{/images/{imageName}(imageName=${hotel.getMainImage() != null ? hotel.getMainImage().getImageUrl() : 'default.jpg'})}" alt="Hotel Image">
						       </a>
							   <a th:href="@{/hotel/{hotelId}(hotelId=${hotel.hotelId})}">
							   	      <div class="hotel-name" th:text="${hotel?.hotelName}">Hotel Name</div>
					    	     </a>
					           <!-- <p th:text="${hotel.location}">Location</p>-->
					            <span class="room-prices" th:text="${hotel.getRooms() != null && !hotel.getRooms().isEmpty() ? hotel.getRooms().get(0).getFormattedPrice() : 'No rooms available'}">Price</span>
					        </div>
					    </div>
					</div>

			<!-- Banner -->
			<div class="banner">
				<img src="/images/banner.jpg" alt="Banner Image 1">
				<img src="/images/banner2.jpg" alt="Banner Image 2">
				<img src="/images/banner3.jpg" alt="Banner Image 3">
			</div>
		</div>
		<!-- 스크롤 업-->
		<div>
			<i class="bi bi-arrow-up-square-fill" id="scrollUpIcon"></i>
		</div>
		<div th:replace="~{footer :: footer}"></div>
		<!-- jQuery (필수) -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<!-- Bootstrap JS and dependencies -->
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<!-- Moment.js (필수) -->
		<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
		<!-- Bootstrap Date Range Picker JS -->
		<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

		<!-- (사용자 정의 자바스크립트) -->
		<script th:src="@{/js/main_보현.js}" type="text/javascript"></script>
		<script th:src="@{/js/scroll.js}" type="text/javascript"></script>
</body>

</body>

</html>	