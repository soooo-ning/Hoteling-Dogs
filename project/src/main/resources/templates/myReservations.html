<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title th:text="|${pageName}|"></title>
	<link rel="stylesheet" th:href="@{/css/mypage_styles.css}">
	<link rel="stylesheet" th:href="@{/css/myReservations.css}">
	<link rel="stylesheet" th:href="@{/css/nav_보현.css}">
	<link rel="stylesheet" th:href="@{/css/scroll.css}">
	<!-- Bootstrap CSS CDN -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Bootstrap Icons CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
	<!-- Bootstrap Date Range Picker CSS -->
	<link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet">
</head>

<body>
<div class="header">
<!-- 네비게이션 바 -->
<div th:insert="~{nav :: nav}"></div>
<!-- 네비게이션 바의 높이만큼 여백을 주어 콘텐츠가 네비게이션 바 아래에 위치하도록 함 -->
	<div style="height: 60px;"></div> 
</div>

<!-- body -->
<div class="container">
	<div class="container-sub">
		<h1><a th:href="@{/security-login/info}">My Page</a></h1>
	</div>

	<div class="layout">
			<!-- Sidebar Section -->
			<div class="sidebar">
				<div class="profile-container">
					<div class="profile-img"><img src="/images/profile.jpg"></div>
					<div class="profile-info">
						<div class="semiinfo" th:text="${user.uRole}"></div>
						<div class="semiinfo"><span
								th:text="${#lists.isEmpty(dogInfos) ? '애견 정보 없음' : (dogInfos[0].dogName + ' 주인님,')}"></span>
						</div>
						<div class="semiinfo" th:text="${user.uName} + '님'"></div>
					</div>
				</div>

				<div class="info-main-category">
					<div class="infomodify-category"><a th:href="@{/{loginType}/info/modify(loginType=${loginType})}">개인정보수정</a></div>
					<div class="infomodify-category"><a th:href="@{/{loginType}/info/my-reservations(loginType=${loginType})}">나의 예약관리</a></div>
					<div class="infomodify-category"><a th:href="@{/wishlist/my-favorites}">나의 찜목록</a></div>
					<div class="infomodify-category"><a th:href="@{/{loginType}/info/my-point(loginType=${loginType})}">나의 포인트관리</a></div>
					<div class="infomodify-category"><a th:href="@{/userReviewList}">내가 쓴 리뷰확인</a></div>
				</div>
			</div>
			<div class="main-content">
			    <!-- 수정된 오른쪽 부분 -->
			    <div class="reservations-container">
			        <div class="reservation-box">
			            <h2 class="reservation-title bordered-text">나의 예약 관리</h2>
			            <hr>
			        </div>

			        <!-- 예약 정보 반복 출력 -->
			        <div th:if="${#lists.isEmpty(reservations)}">
			            <p>예약된 호텔이 없습니다.</p>
			        </div>

			        <!-- 이용 예정 예약 -->
			        <div th:each="reservation : ${reservations}" th:if="${reservation.status == 'UPCOMING'}">
			            <div class="reservation-item d-flex">
			                <div class="images-box">
			                    <!-- 호텔 이미지 출력, 이미지가 없을 경우 기본 이미지 사용 -->
			                    <img th:src="@{/images/{imageName}(imageName=${reservation.hotel.getMainImage() != null ? reservation.hotel.getMainImage().getImageUrl() : 'default.jpg'})}" 
			                         alt="호텔 이미지" width="100px" height="100px" class="reservations-img">
			                </div>
			                <div class="text-box ml-3">
			                    <!-- 호텔 이름 -->
			                    <div class="card-text" th:text="${reservation.hotel.hotelName}">호텔 이름</div>
			                    <!-- 예약 상태 -->
			                    <div class="card-text">이용 예정</div>
			                    <!-- 체크인/체크아웃 날짜 -->
			                    <div class="card-text" th:text="${reservation.checkInDate} + ' ~ ' + ${reservation.checkOutDate}">2024-08-22~08-23</div>
			                    <button type="button" class="btn btn-sm custom-button">상세보기</button>
			                    <button type="button" class="btn btn-sm custom-button">취소</button>
			                </div>
			            </div>
			            <hr>
			        </div>

			        <!-- 이용 완료된 예약 -->
			        <div class="reservation-box">
			            <h2 class="reservation-title bordered-text">이용 완료된 예약</h2>
			            <hr>
			        </div>
			        <!-- 완료된 예약이 없을 때 메시지 출력 -->
			        <div th:if="${#lists.isEmpty(completedReservations)}">
			            <p>완료된 예약이 없습니다.</p>
			        </div>
			        <div th:each="reservation : ${completedReservations}">
			            <div class="reservation-item d-flex">
			                <div class="images-box">
			                    <img th:src="@{/images/{imageName}(imageName=${reservation.hotel.getMainImage() != null ? reservation.hotel.getMainImage().getImageUrl() : 'default.jpg'})}" 
			                         alt="호텔 이미지" width="100px" height="100px" class="reservations-img">
			                </div>
			                <div class="text-box ml-3">
			                    <div class="card-text" th:text="${reservation.hotel.hotelName}">호텔 이름</div>
			                    <div class="card-text">이용 완료</div>
			                    <div class="card-text" th:text="${reservation.checkInDate} + ' ~ ' + ${reservation.checkOutDate}">2024-08-22~08-23</div>
			                    <button type="button" class="btn btn-sm custom-button">리뷰 작성하기</button>
			                </div>
			            </div>
			            <hr>
			        </div>

			        <!-- 취소된 예약 -->
			        <div class="reservation-box">
			            <h2 class="reservation-title bordered-text">취소된 예약</h2>
			            <hr>
			        </div>
			        <!-- 취소된 예약이 없을 때 메시지 출력 -->
			        <div th:if="${#lists.isEmpty(canceledReservations)}">
			            <p>취소된 예약이 없습니다.</p>
			        </div>
			        <div th:each="reservation : ${canceledReservations}">
			            <div class="reservation-item d-flex">
			                <div class="images-box">
			                    <img th:src="@{/images/{imageName}(imageName=${reservation.hotel.getMainImage() != null ? reservation.hotel.getMainImage().getImageUrl() : 'default.jpg'})}" 
			                         alt="호텔 이미지" width="100px" height="100px" class="reservations-img">
			                </div>
			                <div class="text-box ml-3">
			                    <div class="card-text" th:text="${reservation.hotel.hotelName}">호텔 이름</div>
			                    <div class="card-text">예약 취소</div>
			                    <div class="card-text" th:text="${reservation.checkInDate} + ' ~ ' + ${reservation.checkOutDate}">2024-08-22~08-23</div>
			                    <button type="button" class="btn btn-sm custom-button">상세보기</button>
			                </div>
			            </div>
			            <hr>
			        </div>
			    </div>
			</div>

			<!-- 스크롤 업-->
			<div>
				<i class="bi bi-arrow-up-square-fill" id="scrollUpIcon"></i>
			</div>
	</div>
</div>
<div th:replace="footer :: footer"></div>
<!-- jQuery (필수) -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- Moment.js (필수) -->
<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
<!-- Bootstrap Date Range Picker JS -->
<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<!-- 스크립트 -->
<script th:src="@{/js/page_nav.js}" type="text/javascript"></script>
<script th:src="@{/js/scroll.js}" type="text/javascript"></script>
</body>

</html>