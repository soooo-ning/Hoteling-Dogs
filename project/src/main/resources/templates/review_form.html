<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>리뷰 작성하기</title>
    <link rel="stylesheet" th:href="@{/css/review_styles.css}">
	<link rel="stylesheet" th:href="@{/css/nav_보현.css}">
	<!-- Bootstrap CSS CDN -->
		<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
		<!-- Bootstrap Icons CDN -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
		<!-- Bootstrap Date Range Picker CSS -->
		<link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet">
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
   
  
    
</head>
<body>
	<!-- 네비게이션 바 -->
	<div th:insert="~{nav :: nav}"></div>
  
	
	
	  <div class="reviewform">
		<h1>REVIEW</h1>
		<h1>${hotel.hotelName}에 대한 리뷰 작성</h1>
		   <form action="/submitReview" method="post" enctype="multipart/form-data">
		       <input type="hidden" name="hotel_res_id" value="${hotel.hotelId}"> <!-- 호텔 ID -->
		       <input type="hidden" name="user_id" value="${uId}"> <!-- 사용자 ID -->
		  
		  <!-- 호텔 정보 표시 -->
		  <p>체크인 날짜: <span th:text="${reservation.startDate}">2023-01-01</span></p>
		  <p>체크아웃 날짜: <span th:text="${reservation.endDate}">2023-01-03</span></p>
		  <p>예약자 이름: <span th:text="${reservation.reservationName}">홍길동</span></p>


        <table style="width:100%;height:100px;border-collapse: collapse;">
            <colgroup>
                <col span="1" style="width: 3%;">
                <col span="1" style="width: 90%;">
            </colgroup>
            <tbody>
                <tr style="border-top : 1px solid;">
                    <td>
                        <label for="rating">별점:</label>
                    </td>
                    <td>
                        <div class="star-rating">
                            <input type="radio" id="star5" name="review_star" value="5" /><label for="star5" title="5 stars">&#9733;</label>
                            <input type="radio" id="star4" name="review_star" value="4" /><label for="star4" title="4 stars">&#9733;</label>
                            <input type="radio" id="star3" name="review_star" value="3" /><label for="star3" title="3 stars">&#9733;</label>
                            <input type="radio" id="star2" name="review_star" value="2" /><label for="star2" title="2 stars">&#9733;</label>
                            <input type="radio" id="star1" name="review_star" value="1" /><label for="star1" title="1 star">&#9733;</label>
                        </div>
                    </td>
                </tr>
				<label for="content">리뷰 내용:</label>
				      <textarea name="content" id="content" required></textarea>
				      
                </tr>
            </tbody>
        </table>

		<label for="image">이미지 첨부:</label>
		       <input type="file" name="image" id="image" accept="image/*">
		       
		
		
		<!--↓↓↓  이미지 첨부 시 미리보기 기능 추가  ↓↓↓-->
        
		<!-- 미리보기 이미지를 표시할 영역 -->
        <div id="imagePreview"></div>

        <br><br>
    </form>
    
    <div class="button-group">
        <button id="uploadBtn" class="submit-btn">리뷰 작성</button>
        <button id="cancelBtn" class="cancel-btn" onclick="window.location.href='/reviewList'">작성 취소</button>
    </div>
	</div>
    <script>
        $(function() {
            // 이미지 첨부파일 미리보기 기능
            $("input[name='image']").change(function(e) {
                const inputFile = e.target.files[0];
                const reader = new FileReader();

                if (inputFile) {
                    reader.onload = function(event) {
                        const imgPreview = $('<img />', {
                            src: event.target.result,
                            alt: '미리보기 이미지'
                        });

                        // 기존 미리보기 이미지 제거 후 새로 추가
                        $("#imagePreview").empty().append(imgPreview);
                    };

                    // 파일을 읽어 미리보기
                    reader.readAsDataURL(inputFile);
                } else {
                    // 파일이 없을 경우 미리보기 영역 초기화
                    $("#imagePreview").empty();
                }
            });
        });
		$(document).ready(function() {
		    $("#uploadBtn").click(function() {
		        $("#reviews").submit(); // 폼 제출
		    });
		});

    </script>
	<!-- jQuery (필수) -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<!-- Bootstrap JS and dependencies -->
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<!-- Moment.js (필수) -->
		<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
		<!-- Bootstrap Date Range Picker JS -->
		<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<!-- 스크립트 -->
	<script th:src="@{/js/page_nav.js}" type="text/javascript"></script>
	<script src="/js/review_form.js"></script>
</body>
</html>
