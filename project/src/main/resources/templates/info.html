<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title th:text="|${pageName}|"></title>
	<link rel="stylesheet" th:href="@{/css/mypage_styles.css}">
	<link rel="stylesheet" th:href="@{/css/nav_보현.css}">
	<link rel="stylesheet" th:href="@{/css/scroll.css}">
	<!-- Bootstrap CSS CDN -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Bootstrap Icons CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
	<!-- Bootstrap Date Range Picker CSS -->
	<link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet">
</head>

<body>
<div class="header">
<!-- 네비게이션 바 -->
<div th:insert="~{nav :: nav}"></div>

<!-- 네비게이션 바의 높이만큼 여백을 주어 콘텐츠가 네비게이션 바 아래에 위치하도록 함 -->
	<div style="height: 60px;"></div> 
</div>

<!-- body -->
<div class="container">
	<div class="container-sub">
		<h1><a th:href="@{/security-login/info}">My Page</a></h1>
	</div>

	<div class="layout">
		<!-- Sidebar Section -->
		<div class="sidebar">
			<div class="profile-container">
				<div class="profile-img"><img src="/images/profile.jpg"></div>
				<div class="profile-info">
					<div class="semiinfo" th:text="${user.uRole}"></div>
					<div class="semiinfo"><span
							th:text="${#lists.isEmpty(dogInfos) ? '애견 정보 없음' : (dogInfos[0].dogName + ' 주인님,')}"></span>
					</div>
					<div class="semiinfo" th:text="${user.uName} + '님'"></div>
				</div>
			</div>

			<div class="info-main-category">
				<div class="infomodify-category"><a th:href="@{/{loginType}/info/modify(loginType=${loginType})}">개인정보수정</a></div>
				<div class="infomodify-category"><a th:href="@{/{loginType}/info/my-reservations(loginType=${loginType})}">나의 예약관리</a></div>
				<div class="infomodify-category"><a th:href="@{/wishlist/my-favorites}">나의 찜목록</a></div>
				<div class="infomodify-category"><a th:href="@{/{loginType}/info/my-point(loginType=${loginType})}">나의 포인트관리</a></div>
				<div class="infomodify-category"><a th:href="@{/userReviewList}">내가 쓴 리뷰확인</a></div>
		    </div>
		</div>

		<!-- Main Content Section -->
		<div class="main-content">
    <!-- 계정 정보 섹션 -->
    <div class="main-content-div">
        <a th:href="@{/{loginType}/info/modify(loginType=${loginType})}">
            <h2 class="info_sub">계정 정보</h2>
            <hr />
        </a>
        <form th:action="@{/{loginType}/info/modify(loginType=${loginType})}" method="post">
            <div class="form-group">
                <label for="uName">이름</label>
                <input type="text" id="uName" class="form-control" name="uName" th:value="${user.uName}" readonly/>
            </div>
            <div class="form-group">
                <label for="uPhoneNum">생년월일</label>
                <input type="text" id="uSsn" class="form-control" name="uSsn" th:value="${user.uSsn}" readonly/>
            </div>
            <div class="form-group">
                <label for="uEmail">이메일</label>
                <input type="email" id="uEmail" class="form-control" name="uEmail" th:value="${user.uEmail}" readonly/>
            </div>
            <div class="form-group">
                <label for="uPhoneNum">전화번호</label>
                <input type="text" id="uPhoneNum" class="form-control" name="uPhoneNum" th:value="${user.uPhoneNum}" readonly/>
            </div>
        </form>
    </div>

    <!-- 나의 예약 목록 섹션 -->
    <div class="main-content-div">
        <a th:href="@{/{loginType}/info/my-reservations(loginType=${loginType})}">
            <h2>나의 예약 목록</h2></a>
			<hr>
			
            <div th:if="${#lists.isEmpty(reservations)}">
                <p>예약한 호텔이 없습니다.</p>
            </div>
            <div th:each="reservation : ${reservations}">
                <div class="card" style="width: 18rem;">
                    <img th:src="@{/images/{imageName}(imageName=${reservation.hotel.getMainImage().getImageUrl()})}" class="card-img-top" alt="호텔 이미지">
                    <div class="card-body">
                        <h5 class="card-title" th:text="${reservation.hotel.hotelName}">호텔 이름</h5>
                        <p class="card-text" th:text="${reservation.hotel.location}">호텔 위치</p>
                        <p class="card-text" th:text="${reservation.checkInDate} + ' ~ ' + ${reservation.checkOutDate}">체크인 - 체크아웃</p>
                        <a href="#" class="btn btn-primary">자세히 보기</a>
                    </div>
                </div>
            </div>
        </a>
    </div>

    <!-- 찜 목록 섹션 -->
<div class="main-content-div">
    <div class="reservations-container">
        <div class="reservation-item">
            <div class="reservation-box">
				<a th:href="@{/wishlist/my-favorites}">
                <h2 class="reservation-title bordered-text">내가 찜한 목록</h2></a>
                <hr>
                <span class="toggle-button"></span>
            </div>

            <div id="hotelList">
                <!-- 찜한 목록이 없을 때 메시지 표시 -->
                <div th:if="${message}" th:text="${message}" class="no-wishlist-message"></div>

                <div th:if="${not #lists.isEmpty(hotels)}" class="cards">
                    <!-- 각 호텔 아이템 -->
                     <div th:each="hotel, iterStat : ${hotels}" th:if="${iterStat.index < 3}" class="card" th:id="'hotel-' + ${hotel.hotelId}">
                        <div class="card-img-wrapper">
                            <img th:src="@{/images/{imageName}(imageName=${hotel.getMainImage() != null ? hotel.getMainImage().getImageUrl() : 'default.jpg'})}" 
                                 alt="Hotel Image" 
                                 class="card-img-top">
                            <div class="heart-icon">
                                <i class="fa fa-heart"></i>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="card-title hotel-name" th:text="${hotel.hotelName}">호텔 이름</div>
							<div class="place-meta" th:text="${hotel?.location}">hotel location</div>
                            <div class="button-group">
                                <!--<button type="button" class="btn btn-sm custom-button" 
                                        th:onclick="'viewDetails(' + ${hotel.hotelId} + ')'">상세보기</button>
                                <button type="button" class="btn btn-sm custom-button" 
                                        th:onclick="'removeFromWishlist(' + ${hotel.hotelId} + ')'">취소</button>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</div>

<!-- 스크롤 업-->
	<div>
		<i class="bi bi-arrow-up-square-fill" id="scrollUpIcon"></i>
	</div>

</div>
</div>
<div th:replace="~{footer :: footer}"></div>
	<!-- jQuery (필수) -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<!-- Bootstrap JS and dependencies -->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<!-- Moment.js (필수) -->
	<script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
	<!-- Bootstrap Date Range Picker JS -->
	<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<!-- 스크립트 -->
	<script th:src="@{/js/page_nav.js}" type="text/javascript"></script>
	<script th:src="@{/js/scroll.js}" type="text/javascript"></script>
</body>
</html>

