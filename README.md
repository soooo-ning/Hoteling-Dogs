# Hoteling-Dogs

ê°•ì•„ì§€ í˜¸í…” ì˜ˆì•½ í”Œë«í¼ íŒ€í”„ë¡œì íŠ¸ ì†ŒìŠ¤ì½”ë“œ ë°±ì—…ì…ë‹ˆë‹¤.

<br>

![ì‰¼, ë… _ ë©ë© í« í˜¸í…”](https://github.com/user-attachments/assets/4c139ef5-02ed-4834-9ea3-10acde1742f8)

> **Notice**
> ì´ ë ˆí¬ì§€í† ë¦¬ëŠ” íŒ€í”„ë¡œì íŠ¸ ì†ŒìŠ¤ì½”ë“œ ì•„ì¹´ì´ë¸Œì…ë‹ˆë‹¤.
> ì™¸ë¶€ API í‚¤ ë§Œë£Œ(Iamport, ì¹´ì¹´ì˜¤ë§µ) ë° DB í™˜ê²½ ë¯¸í¬í•¨ìœ¼ë¡œ í˜„ì¬ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

<br>

## ğŸ—“ï¸ Project Period

2024.08 - 2024.09 (5ì£¼) | 4ì¸ í’€ìŠ¤íƒ íŒ€ í”„ë¡œì íŠ¸

<br>

## ğŸ’» Tech Stack

<img src="https://img.shields.io/badge/java-FF7800?style=flat-square&logo=java&logoColor=white"/> &nbsp;
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=flat-square&logo=javascript&logoColor=white"/> &nbsp;
<img src="https://img.shields.io/badge/springboot-6DB33F?style=flat-square&logo=springboot&logoColor=white"/> &nbsp;
<img src="https://img.shields.io/badge/thymeleaf-005F0F?style=flat-square&logo=thymeleaf&logoColor=white"/> &nbsp;
<img src="https://img.shields.io/badge/mysql-4479A1?style=flat-square&logo=mysql&logoColor=white"/> &nbsp;

<br>

| ë¶„ë¥˜              | ê¸°ìˆ                                              |
| ---------------- | ----------------------------------------------- |
| **Backend**      | Spring Boot 3.3.4, JPA, Gradle, Java 17         |
| **Frontend**     | Thymeleaf, JavaScript                           |
| **Auth**         | Spring Security, JWT, OAuth 2.0 (Google, Kakao) |
| **Database**     | MySQL, Redis                                    |
| **External API** | Iamport (ê²°ì œ), Gmail SMTP, ì¹´ì¹´ì˜¤ë§µ               |

<br>

## ğŸ“ Project Structure

```
com.hoteling.project/
â”œâ”€â”€ controller/     # API ì—”ë“œí¬ì¸íŠ¸
â”œâ”€â”€ service/        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”œâ”€â”€ repository/     # ë°ì´í„° ì ‘ê·¼ (JPA)
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entity/     # JPA ì—”í‹°í‹°
â”‚   â””â”€â”€ dto/        # ìš”ì²­/ì‘ë‹µ DTO
â”œâ”€â”€ config/         # Security, Redis ì„¤ì •
â””â”€â”€ exception/      # ì˜ˆì™¸ ì²˜ë¦¬
```
<br>

## ğŸ“ƒ Output

<details>
  <summary>ERD</summary>
  <img width="2440" height="1287" alt="erd" src="https://github.com/user-attachments/assets/6f1d9a8b-1002-438e-86dd-d7cb57e45b98" />
</details>

<details>
  <summary>IA</summary>
  <img width="2440" height="1287" alt="erd" src="https://github.com/user-attachments/assets/50d4bfa4-9cf6-43fa-8da4-35e8963ba945" />
</details>

<details>
  <summary>wireframe</summary>
  <img width="2440" height="1287" alt="erd" src="https://github.com/user-attachments/assets/4e5e5086-83df-4fc5-9d5a-0fa688984326" />
</details>

<br>

## ğŸ‘¨â€ğŸ’» My Role

### ë‹´ë‹¹ ê¸°ëŠ¥

<table border="1" cellspacing="0" cellpadding="8">
  <thead>
    <tr>
      <th>êµ¬ë¶„</th>
      <th>ê¸°ëŠ¥</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="5">í˜¸í…” ìƒì„¸ í˜ì´ì§€</td>
      <td>í˜¸í…” ì •ë³´ ì¡°íšŒ (ì´ë¯¸ì§€, ì§€ë„ ìœ„ì¹˜, ë¦¬ë·°, Q&amp;A)</td>
    </tr>
    <tr>
      <td>ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë”</td>
    </tr>
    <tr>
      <td>ë‚ ì§œ ì„ íƒ ë° ê°•ì•„ì§€ ìœ í˜• ì„ íƒ</td>
    </tr>
    <tr>
      <td>ê°ì‹¤ ê°€ìš©ì„± ì²´í¬</td>
    </tr>
    <tr>
      <td>ì¹´ì¹´ì˜¤ë§µ API ì—°ë™</td>
    </tr>
    <tr>
      <td rowspan="4">ì˜ˆì•½ í˜ì´ì§€</td>
      <td>ì˜ˆì•½ì ì •ë³´ ì…ë ¥ í¼</td>
    </tr>
    <tr>
      <td>ë°˜ë ¤ê²¬ ì •ë³´ ì…ë ¥ (ì´ë¦„, ì„±ë³„, ë‚˜ì´, ë¬´ê²Œ, ê²¬ì¢…)</td>
    </tr>
    <tr>
      <td>ìœ íš¨ì„± ê²€ì‚¬ (í”„ë¡ íŠ¸)</td>
    </tr>
    <tr>
      <td>ì˜ˆì•½ í™•ì¸ ì •ë³´ í‘œì‹œ</td>
    </tr>
    <tr>
      <td rowspan="3">ê²°ì œ ì‹œìŠ¤í…œ</td>
      <td>ì•„ì„í¬íŠ¸(Iamport) API ì—°ë™</td>
    </tr>
    <tr>
      <td>ì¹´ì¹´ì˜¤í˜ì´/í† ìŠ¤í˜ì´ ê²°ì œ ìˆ˜ë‹¨</td>
    </tr>
    <tr>
      <td>ê²°ì œ ì „ ë™ì˜ ì²´í¬</td>
    </tr>
    <tr>
      <td rowspan="1">ê²°ì œ ì™„ë£Œ í˜ì´ì§€</td>
      <td>ì˜ˆì•½ ì™„ë£Œ ì•ˆë‚´</td>
    </tr>
  </tbody>
</table>

<br>

### ì£¼ìš” êµ¬í˜„ ì½”ë“œ

### 1. ê°ì‹¤ ê°€ìš©ì„± ì²´í¬ API

> [HotelController.java](project/src/main/java/com/hoteling/project/controller/HotelController.java)

ë‚ ì§œì™€ ê°•ì•„ì§€ íƒ€ì…ì— ë”°ë¥¸ ì˜ˆì•½ ê°€ëŠ¥ ê°ì‹¤ ì¡°íšŒ:

```java
@GetMapping("/hotel/availability")
@ResponseBody
public ResponseEntity<?> checkAvailability(
        @RequestParam("hotelId") Long hotelId,
        @RequestParam("startDate") LocalDate startDate,
        @RequestParam("endDate") LocalDate endDate,
        @RequestParam("dogType") DogType dogType) {

    List<HotelRoomEntity> availableRooms =
        hotelListService.findAvailableRooms(hotelId, startDate, endDate, dogType);

    Map<String, Object> response = new HashMap<>();
    response.put("code", "SU");
    response.put("availableRoom", availableRooms.stream()
            .map(room -> {
                Map<String, Object> roomData = new HashMap<>();
                roomData.put("roomId", room.getRoomId());
                roomData.put("availableRooms", room.getAvailableRooms());
                roomData.put("price", room.getPrice());
                return roomData;
            })
            .collect(Collectors.toList()));

    return ResponseEntity.ok(response);
}
```

### 2. ì˜ˆì•½ ìƒì„± API

> [ReservationController.java](project/src/main/java/com/hoteling/project/controller/ReservationController.java)

ì˜ˆì•½ ì •ë³´ ê²€ì¦ ë° ìƒì„±:

```java
@PostMapping
public ResponseEntity<?> createReservation(
        @RequestParam("hotelId") Long hotelId,
        @RequestParam("startDate") @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate startDate,
        @RequestParam("endDate") @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate endDate,
        @RequestParam("dogType") DogType dogType,
        @RequestBody ReservationRequestDto reservationForm,
        Authentication authentication) {

    String userId = authentication.getName();

    ResponseEntity<? super ResponseDto> response = reservationService.createReservation(
            userId, hotelId, startDate, endDate, dogType, reservationForm);

    if (response.getStatusCode().is2xxSuccessful()) {
        return ResponseEntity.ok(response.getBody());
    }
    return ResponseEntity.status(HttpStatus.BAD_REQUEST)
            .body("ì˜ˆì•½ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
}
```

### 3. ê²°ì œ ì²˜ë¦¬ API

> [PaymentController.java](project/src/main/java/com/hoteling/project/controller/PaymentController.java)

ì•„ì„í¬íŠ¸ ê²°ì œ ê²€ì¦ ë° ì²˜ë¦¬:

```java
@PostMapping("/process")
public ResponseEntity<?> processPayment(
        @RequestBody PaymentRequestDto requestDto,
        Authentication auth) {

    String userId = auth.getName();
    ResponseEntity<? super PaymentResponseDto> response =
        paymentService.processPayment(requestDto);

    if (response.getStatusCode().is2xxSuccessful()) {
        return ResponseEntity.ok(response.getBody());
    }
    return ResponseEntity.status(HttpStatus.BAD_REQUEST)
            .body("ê²°ì œ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
}
```

<br>

## ğŸ’¡ What I Learned

ì´ í”„ë¡œì íŠ¸ì—ì„œ ë°°ìš´ ê²ƒ

| ì˜ì—­                | ë°°ìš´ ì                                                    |
| ------------------- | --------------------------------------------------------- |
| **ì™¸ë¶€ API ì—°ë™**   | ì¹´ì¹´ì˜¤ë§µ, ì•„ì„í¬íŠ¸ ê²°ì œ API ë¬¸ì„œ ë¶„ì„ ë° ì¸ì¦ í”Œë¡œìš° ì´í•´ |
| **ì˜ˆì•½ ì‹œìŠ¤í…œ**     | ë‚ ì§œ ê¸°ë°˜ ê°€ìš©ì„± ì²´í¬, ê¸ˆì•¡ ê³„ì‚° ë¡œì§ ì„¤ê³„                |

<br>

## ğŸ› ï¸ Points to Improve

ì•„ì‰¬ì› ë˜ ì  â†’ ì´í›„ ê°œì„  ë°©í–¥

| ë¬¸ì œì                          | ì›ì¸                    | ê°œì„  ë°©í–¥                                                    |
| ------------------------------ | ----------------------- | ------------------------------------------------------------ |
| ì»¨íŠ¸ë¡¤ëŸ¬ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í˜¼ì¬  | ê³„ì¸µ ë¶„ë¦¬ ê°œë… ë¶€ì¡±     | Service ê³„ì¸µìœ¼ë¡œ ë¡œì§ ë¶„ë¦¬, DTO íŒ¨í„´ ì ìš©                    |
| í™˜ê²½ ì„¤ì • íŒŒì¼ì— ë¯¼ê°ì •ë³´ ë…¸ì¶œ | í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ ë¯¸ìˆ™      | `.env` íŒŒì¼ ë¶„ë¦¬, Spring Profiles í™œìš©                       |
| ì˜ˆì•½-ê²°ì œ í”Œë¡œìš° ë¶„ë¦¬          | íŠ¸ëœì­ì…˜ ì„¤ê³„ ê²½í—˜ ë¶€ì¡± | `@Transactional`ë¡œ ì›ìì  ì²˜ë¦¬, ìƒíƒœ ê´€ë¦¬(PENDINGâ†’CONFIRMED) |
| í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ êµ¬ì¡°í™” ë¶€ì¡±    | JS ëª¨ë“ˆí™” ê°œë… ë¶€ì¡±     | ê¸°ëŠ¥ë³„ íŒŒì¼ ë¶„ë¦¬, ëª¨ë“ˆ íŒ¨í„´ ì ìš©                             |
